<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QtBackgroundProcess: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="display: inline;">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QtBackgroundProcess
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
   <div id="projectbrief">A Library to create background applications with simple, automated foreground control</div>
  </td>
 </tr>
 </tbody>
</table>
<a style="float: right;" target="_blank"  href="https://github.com/Skycoder42/QtBackgroundProcess">
<img style="padding: 10px;" src="GitHub_Logo.png"/>
</a>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">QtBackgroundProcess Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#qtbackgroundprocess_readme_label_0">Features</a></li>
<li class="level1"><a href="#qtbackgroundprocess_readme_label_1">Use Case</a></li>
<li class="level1"><a href="#qtbackgroundprocess_readme_label_2">Usage</a><ul><li class="level2"><a href="#qtbackgroundprocess_readme_label_3">Example</a></li>
<li class="level2"><a href="#qtbackgroundprocess_readme_label_4">Debugging the master process</a></li>
</ul>
</li>
<li class="level1"><a href="#qtbackgroundprocess_readme_label_5">Download/Installation</a></li>
<li class="level1"><a href="#qtbackgroundprocess_readme_label_6">Documentation</a></li>
<li class="level1"><a href="#qtbackgroundprocess_readme_label_7">Technical Stuff</a></li>
</ul>
</div>
<div class="textblock"><p>A Library to create background applications with simple, automated foreground control.</p>
<p>In short, with this library you can easly create cross platform applications, that are ment to run in the background, without any UI. This however, is fairly easy and would not require a library. This one however adds a few things, that make it much more comfortable to use those.</p>
<p>Have a look at the features.</p>
<h1><a class="anchor" id="qtbackgroundprocess_readme_label_0"></a>
Features</h1>
<ul>
<li>Cross platform, supports all Qt-Platforms, that allow multi-process applications and console applications</li>
<li>Runs your application in the background, without a console window or similar (so called "master process")</li>
<li>Runs as a singleton (for the current user / root)</li>
<li>The background process will always start independently</li>
<li>A "execution" of an application (for example via the console) will start a "terminal"<ul>
<li>Terminals will connect to the running master. If none is running, you can start it with the terminal</li>
<li>Terminals send their command line arguments to the running master</li>
<li>A connected terminal can send input to the master (via stdin) and receive output (stdout)</li>
<li>Terminals can disconnect by beeing closed, leaving the master running (even the one that started the master)</li>
<li>The master continues running, even if all terminals have been disconnected</li>
<li>Terminals can ask the master to stop</li>
</ul>
</li>
<li>Terminals are a part of the library and work as is. You don't have to do anything with them, only "implement" you application as master process</li>
<li>The master can send output to all terminals at once, or directly communicate with a terminal</li>
<li>The master automates logging, by writing it to a log file, and sending it to the terminals (both optional)</li>
<li>Provides a basic CLI, with usefull commands for the master<ul>
<li>Can be easily extended by your application</li>
</ul>
</li>
<li>Integrates the <a href="https://github.com/Skycoder42/QCtrlSignals">QCtrlSignals</a> to react on typical signals like <code>SIGINT</code></li>
</ul>
<h1><a class="anchor" id="qtbackgroundprocess_readme_label_1"></a>
Use Case</h1>
<p>The QtBackgroundProcess is a library for console applications. It is not intended to be used with GUI-Apps or similar, and probably won't work with them. If you are looking for simply a "singleton instance", i.e. a library that will make shure only one instance of your application runs at a time, have a look at <a href="https://github.com/Skycoder42/QSingleInstance">QSingleInstance</a>.</p>
<p>However, if you want to create an application to run silently in the background, and only interact with it to "control" it, you're at the right place.</p>
<h1><a class="anchor" id="qtbackgroundprocess_readme_label_2"></a>
Usage</h1>
<p>The background process is provided as a <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a> module. Thus, all you have to do is add the module, and then, in your project, add <code>QT += backgroundprocess</code> to your <code>.pro</code> file!</p>
<p>All you need to do in your code is to use <code><a class="el" href="class_qt_background_process_1_1_app.html" title="The background process application. The main class of QtBackgroundProcess. ">QtBackgroundProcess::App</a></code> instead of <code><a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qcoreapplication.html">QCoreApplication</a></code> and put your code in the startup function or extend it.</p>
<h2><a class="anchor" id="qtbackgroundprocess_readme_label_3"></a>
Example</h2>
<p>The following example is a very simple background application, that logs all command arguments that have been passed by the terminals. In addition to that, it will send all debug output to all terminals.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QtBackgroundProcess&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;QDebug&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    <a class="code" href="class_qt_background_process_1_1_app.html">QtBackgroundProcess::App</a> a(argc, argv);</div><div class="line">    <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qcoreapplication.html#applicationVersion-prop">QCoreApplication::setApplicationVersion</a>(<span class="stringliteral">&quot;4.2.0&quot;</span>);</div><div class="line"></div><div class="line">    qApp-&gt;setForwardMasterLog(<span class="keyword">true</span>);<span class="comment">//forwards all debug log to terminals IF this becomes the master</span></div><div class="line">    a.setStartupFunction([](<span class="keyword">const</span> <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qcommandlineparser.html">QCommandLineParser</a> &amp;){</div><div class="line">        <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qobject.html#connect">QObject::connect</a>(qApp, &amp;<a class="code" href="class_qt_background_process_1_1_app.html#a3e892a48255c68a03768bb9e5dbaed74">QtBackgroundProcess::App::commandReceived</a>, qApp, [](<a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qsharedpointer.html">QSharedPointer&lt;QCommandLineParser&gt;</a> parser, <span class="keywordtype">bool</span> isStarter){</div><div class="line">            qDebug() &lt;&lt; <span class="stringliteral">&quot;Received command with arguments:&quot;</span></div><div class="line">                        &lt;&lt; parser-&gt;positionalArguments()</div><div class="line">                        &lt;&lt; <span class="stringliteral">&quot;and options:&quot;</span></div><div class="line">                        &lt;&lt; parser-&gt;optionNames()</div><div class="line">                        &lt;&lt; (isStarter ? <span class="stringliteral">&quot;(starter)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line">        });</div><div class="line"></div><div class="line">        qDebug() &lt;&lt; <span class="stringliteral">&quot;Master process succsesfully stated!&quot;</span>;</div><div class="line">        <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">    });</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> a.exec();</div><div class="line">}</div></div><!-- fragment --><p> The first few commands (i.e. Version number) are done for every instance, including the terminals. The part inside of <code>setStartupFunction</code> will be executed on the master only.</p>
<p>To find out what you can do with this application, simply call <code>&lt;path_to&gt;/myApp --help</code> - this will show the command line arguments that can be used. Use <code>start</code> to start the master process and <code>stop</code> to stop it. Please remember the the master process will continue to run, even after you have closed all terminals. Use the <code>stop</code> command to stop it. For a demo app, see <code>examples/backgroundprocess/DemoApp</code>.</p>
<h2><a class="anchor" id="qtbackgroundprocess_readme_label_4"></a>
Debugging the master process</h2>
<p>Since all of the application logic is happening in the master process, debugging the terminals does not really help. However, with "normal" commands you can only start terminals, not the master, and thus not debug it. If you need to debug the master, it can be helpful to start the master process directly, instead of using a terminal. To do so, all you need to do is launch it with a special first argument:</p>
<p>If your normal command looks for example like this: <code>./myApp start some arguments</code><br />
 You can directly start the master process by using: `./myApp '__qbckgrndprcss$start::master~' some arguments`</p>
<p>The master process is not meant to be directly run. Thus, it will for example, not show a console window, disconnect stdin/stdout, etc. This makes it hard to get the debug without a terminal. You can try the following options, depending on what suits you needs:</p><ul>
<li>Start the master with a working console. This will only work as long as no terminals are attached, no logfile is used and you don't need stdin. For most situations, this is the recommended way of debugging. Use <code>-L "" --keep-console</code> as additional parameters for the master to enable this.</li>
<li>Watch the log file and reload it on changes, i.e. use <code>tail -f logfile</code>. To get the location, run <code>--help</code> and see the <code>-L</code> parameter. You can use terminals normally</li>
<li>Enable log forwarding to pass qDebug messages to all connected terminals. See <a class="el" href="class_qt_background_process_1_1_app.html#a8478470ce2306df1dcd8f162bca8ee73" title="Specifies, whether the master should forward debug output to all terminals. ">QtBackgroundProcess::App::forwardMasterLog</a>. Simply start a parameterless terminal after launching the master to see the output.</li>
</ul>
<h1><a class="anchor" id="qtbackgroundprocess_readme_label_5"></a>
Download/Installation</h1>
<p>There are multiple ways to install the <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a> module, sorted by preference:</p>
<ol type="1">
<li><b>Arch-Linux only:</b> If you are building against your system <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a>, you can use my AUR-Repository: <a href="https://aur.archlinux.org/packages/qt5-backgroundprocess/">qt5-backgroundprocess</a></li>
<li>Simply add my repository to your <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a> MaintenanceTool (Image-based How-To here: <a href="https://github.com/Skycoder42/QtModules/blob/master/README.md#add-my-repositories-to-qt-maintenancetool">Add custom repository</a>):<ol type="a">
<li>Open the MaintenanceTool, located in your <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a> install directory (e.g. <code>~/Qt/MaintenanceTool</code>)</li>
<li>Select <code>Add or remove components</code> and click on the <code>Settings</code> button</li>
<li>Go to <code>Repositories</code>, scroll to the bottom, select <code>User defined repositories</code> and press <code>Add</code></li>
<li>In the right column (selected by default), type:<ul>
<li>On Linux: <a href="https://install.skycoder42.de/qtmodules/linux_x64">https://install.skycoder42.de/qtmodules/linux_x64</a></li>
<li>On Windows: <a href="https://install.skycoder42.de/qtmodules/windows_x86">https://install.skycoder42.de/qtmodules/windows_x86</a></li>
<li>On Mac: <a href="https://install.skycoder42.de/qtmodules/mac_x64">https://install.skycoder42.de/qtmodules/mac_x64</a></li>
</ul>
</li>
<li>Press <code>Ok</code>, make shure <code>Add or remove components</code> is still selected, and continue the install (<code>Next &gt;</code>)</li>
<li>A new entry appears under all supported <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a> Versions (e.g. <code><a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a> &gt; <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a> 5.8 &gt; Skycoder42 <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a> modules</code>)</li>
<li>You can install either all of my modules, or select the one you need: <code><a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a> Background Process</code></li>
<li>Continue the setup and thats it! you can now use the module for all of your installed Kits for that <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a> Version</li>
</ol>
</li>
<li>Download the compiled modules from the release page. <b>Note:</b> You will have to add the correct ones yourself and may need to adjust some paths to fit your installation!</li>
<li>Build it yourself! <b>Note:</b> This requires perl to be installed. If you don't have/need cmake, you can ignore the related warnings. To automatically build and install to your <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.8/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a> installation, run:<ul>
<li><code>qmake</code></li>
<li><code>make qmake_all</code></li>
<li><code>make</code></li>
<li><code>make install</code></li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="qtbackgroundprocess_readme_label_6"></a>
Documentation</h1>
<p>The documentation is available on <a href="https://skycoder42.github.io/QtBackgroundProcess/">github pages</a>. It was created using <a href="http://www.doxygen.org/">doxygen</a>. The HTML-documentation and Qt-Help files are shipped together with the module for both the custom repository and the package on the release page. Please note that doxygen docs do not perfectly integrate with QtCreator/QtAssistant.</p>
<h1><a class="anchor" id="qtbackgroundprocess_readme_label_7"></a>
Technical Stuff</h1>
<p>Please not, that this library does <b>not</b> create a real daemon/service. It merely creates a background process, with advanced terminal connections. This approach allows more flexibility and an easier cross-platform implementation. In addition to that, interaction with the process becomes possible everywhere, without any additional code </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Mar 12 2017 11:07:21 for QtBackgroundProcess by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
