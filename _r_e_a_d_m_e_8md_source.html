<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QtBackgroundProcess: README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="display: inline;">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QtBackgroundProcess
   &#160;<span id="projectnumber">1.5.2</span>
   </div>
   <div id="projectbrief">A Library to create background applications with simple, automated foreground control</div>
  </td>
 </tr>
 </tbody>
</table>
<a style="float: right;" target="_blank"  href="https://github.com/Skycoder42/QtBackgroundProcess">
<img style="padding: 10px;" src="GitHub_Logo.png"/>
</a>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[TOC]</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;A Library to create background applications with simple, automated foreground control.</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;[![Travis Build Status](https://travis-ci.org/Skycoder42/QtBackgroundProcess.svg?branch=master)](https://travis-ci.org/Skycoder42/QtBackgroundProcess)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;[![Appveyor Build status](https://ci.appveyor.com/api/projects/status/v7y9q2oq209tx9q0/branch/master?svg=true)](https://ci.appveyor.com/project/Skycoder42/qtbackgroundprocess/branch/master)</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;In short, with this library you can easly create cross platform applications, that are ment to run in the background, without any UI. This however, is fairly easy and would not require a library. This one however adds a few things, that make it much more comfortable to use those.</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;Have a look at the features.</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;# Features {#qtbackgroundprocess_readme_label_0}</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;- Cross platform, supports all Qt-Platforms, that allow multi-process applications and console applications</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;- Runs your application in the background, without a console window or similar (so called &quot;master process&quot;)</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;- Runs as a singleton (for the current user / root)</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;- The background process will always start independently</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;- A &quot;execution&quot; of an application (for example via the console) will start a &quot;terminal&quot;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  - Terminals will connect to the running master. If none is running, you can start it with the terminal</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  - Terminals send their command line arguments to the running master</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  - A connected terminal can send input to the master (via stdin) and receive output (stdout)</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;  - Terminals can disconnect by beeing closed, leaving the master running (even the one that started the master)</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  - The master continues running, even if all terminals have been disconnected</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  - Terminals can ask the master to stop</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;- Terminals are a part of the library and work as is. You don&#39;t have to do anything with them, only &quot;implement&quot; you application as master process</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;- The master can send output to all terminals at once, or directly communicate with a terminal</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;- The master automates logging, by writing it to a log file, and sending it to the terminals (both optional)</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;- Provides a basic CLI, with usefull commands for the master</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  - Can be easily extended by your application</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;- Integrates the [QCtrlSignals](https://github.com/Skycoder42/QCtrlSignals) to react on typical signals like `SIGINT`</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;# Use Case {#qtbackgroundprocess_readme_label_1}</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;The QtBackgroundProcess is a library for console applications. It is not intended to be used with GUI-Apps or similar, and probably won&#39;t work with them. If you are looking for simply a &quot;singleton instance&quot;, i.e. a library that will make shure only one instance of your application runs at a time, have a look at [QSingleInstance](https://github.com/Skycoder42/QSingleInstance).</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;# Download/Installation {#qtbackgroundprocess_readme_label_2}</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;There are multiple ways to install the Qt module, sorted by preference:</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;1. **Arch-Linux only:** If you are building against your system Qt, you can use my AUR-Repository: [qt5-backgroundprocess](https://aur.archlinux.org/packages/qt5-backgroundprocess/)</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;2. Simply add my repository to your Qt MaintenanceTool (Image-based How-To here: [Add custom repository](https://github.com/Skycoder42/QtModules/blob/master/README.md#add-my-repositories-to-qt-maintenancetool)):</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;   1. Open the MaintenanceTool, located in your Qt install directory (e.g. `~/Qt/MaintenanceTool`)</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;   2. Select `Add or remove components` and click on the `Settings` button</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;   3. Go to `Repositories`, scroll to the bottom, select `User defined repositories` and press `Add`</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;   4. In the right column (selected by default), type:</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;       - On Linux: https://install.skycoder42.de/qtmodules/linux_x64</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;       - On Windows: https://install.skycoder42.de/qtmodules/windows_x86</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;       - On Mac: https://install.skycoder42.de/qtmodules/mac_x64</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;   5. Press `Ok`, make shure `Add or remove components` is still selected, and continue the install (`Next &gt;`)</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;   6. A new entry appears under all supported Qt Versions (e.g. `Qt &gt; Qt 5.8 &gt; Skycoder42 Qt modules`)</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;   7. You can install either all of my modules, or select the one you need: `Qt Background Process`</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;   8. Continue the setup and thats it! you can now use the module for all of your installed Kits for that Qt Version</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;3. Download the compiled modules from the release page. **Note:** You will have to add the correct ones yourself and may need to adjust some paths to fit your installation!</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;4. Build it yourself! **Note:** This requires perl to be installed. If you don&#39;t have/need cmake, you can ignore the related warnings. To automatically build and install to your Qt installation, run:</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;   - `qmake`</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;   - `make qmake_all`</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;   - `make`</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;   - `make install`</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;   - To include translations and documentation, run the `qmake &amp;&amp; make install` once again</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;However, if you want to create an application to run silently in the background, and only interact with it to &quot;control&quot; it, you&#39;re at the right place.</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;# Usage {#qtbackgroundprocess_readme_label_3}</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;The background process is provided as a Qt module. Thus, all you have to do is add the module, and then, in your project, add `QT += backgroundprocess` to your `.pro` file!</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;All you need to do in your code is to use `QtBackgroundProcess::App` instead of `QCoreApplication` and put your code in the startup function or extend it.</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;## Example {#qtbackgroundprocess_readme_label_4}</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;The following example is a very simple background application, that logs all command arguments that have been passed by the terminals. In addition to that, it will send all debug output to all terminals.</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;```cpp</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;#include &lt;QtBackgroundProcess&gt;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;#include &lt;QDebug&gt;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;int main(int argc, char *argv[])</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   QtBackgroundProcess::App a(argc, argv);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;   QCoreApplication::setApplicationVersion(&quot;4.2.0&quot;);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;   qApp-&gt;setForwardMasterLog(true);//forwards all debug log to terminals IF this becomes the master</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;   a.setStartupFunction([](const QCommandLineParser &amp;){</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;       QObject::connect(qApp, &amp;QtBackgroundProcess::App::commandReceived, qApp, [](QSharedPointer&lt;QCommandLineParser&gt; parser, bool isStarter){</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;           qDebug() &lt;&lt; &quot;Received command with arguments:&quot;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                       &lt;&lt; parser-&gt;positionalArguments()</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                       &lt;&lt; &quot;and options:&quot;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                       &lt;&lt; parser-&gt;optionNames()</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                       &lt;&lt; (isStarter ? &quot;(starter)&quot; : &quot;&quot;);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;       });</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;       qDebug() &lt;&lt; &quot;Master process succsesfully stated!&quot;;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;       return EXIT_SUCCESS;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;   });</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;   return a.exec();</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;```</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;The first few commands (i.e. Version number) are done for every instance, including the terminals. The part inside of `setStartupFunction` will be executed on the master only.</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;To find out what you can do with this application, simply call `&lt;path_to&gt;/myApp --help` - this will show the command line arguments that can be used. Use `start` to start the master process and `stop` to stop it. Please remember the the master process will continue to run, even after you have closed all terminals. Use the `stop` command to stop it. For a demo app, see `examples/backgroundprocess/DemoApp`.</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;## Debugging the master process {#qtbackgroundprocess_readme_label_5}</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;Since all of the application logic is happening in the master process, debugging the terminals does not really help. However, with &quot;normal&quot; commands you can only start terminals, not the master, and thus not debug it. If you need to debug the master, it can be helpful to start the master process directly, instead of using a terminal. To do so, all you need to do is launch it with a special first argument:</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;If your normal command looks for example like this: `./myApp start some arguments`&lt;br&gt;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;You can directly start the master process by using: `./myApp &#39;__qbckgrndprcss$start#master~&#39; some arguments`</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;The master process is not meant to be directly run. Thus, it will for example, not show a console window, disconnect stdin/stdout, etc. This makes it hard to get the debug without a terminal. You can try the following options, depending on what suits you needs:</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;- Start the master with a working console. This will only work as long as no terminals are attached, no logfile is used and you don&#39;t need stdin. For most situations, this is the recommended way of debugging. Use `-L &quot;&quot; --keep-console` as additional parameters for the master to enable this.</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;- Watch the log file and reload it on changes, i.e. use `tail -f logfile`. To get the location, run `--help` and see the `-L` parameter. You can use terminals normally</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;- Enable log forwarding to pass qDebug messages to all connected terminals. See QtBackgroundProcess::App::forwardMasterLog. Simply start a parameterless terminal after launching the master to see the output.</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;# Documentation {#qtbackgroundprocess_readme_label_6}</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;The documentation is available on [github pages](https://skycoder42.github.io/QtBackgroundProcess/). It was created using [doxygen](http://www.doxygen.org/). The HTML-documentation and Qt-Help files are shipped</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;together with the module for both the custom repository and the package on the release page. Please note that doxygen docs do not perfectly integrate with QtCreator/QtAssistant.</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;# Translations {#qtbackgroundprocess_readme_label_7}</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;The project is prepared for translation. But since I speak only english and german, those are the only languages I can provide translations for. However, you can easily create the translations yourself. The file `src/backgroundprocess/translations/qtbackgroundprocess_template.ts` is a ready-made TS file. Just rename it (e.g. to `qtbackgroundprocess_jp.ts`) and open it with the QtLinguist to create the translations.</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;# Technical Stuff {#qtbackgroundprocess_readme_label_8}</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;Please not, that this library does **not** create a real daemon/service. It merely creates a background process, with advanced terminal connections. This approach allows more flexibility and an easier cross-platform implementation. In addition to that, interaction with the process becomes possible everywhere, without any additional code.</div></div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 24 2017 11:08:38 for QtBackgroundProcess by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
